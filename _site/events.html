<!DOCTYPE html>
<html lang="en">

  <head>
  

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="CSGSG is dedicated to serving the Computer Science & Computer Engineering Graduate Student Community since 2018">
  <meta name="author" content="Originally Created by Steven Lamp 2024">
  <link rel="canonical" href="http://localhost:4000/events.html">

  <title>CSGSG</title>

  <!-- Bootstrap core CSS -->
  <link href="assets/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Custom fonts for this template -->
  <link href="assets/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
  <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

  <!-- Custom styles for this theme -->
  <!--<link href="assets/css/agency.min.css" rel="stylesheet">-->
  <link href="assets/css/agency.css" rel="stylesheet" />

  <!-- Page container change top padding when nav shrinks -->
  
</head>


  <body id="page-top">

        <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
    <div class="container">
	  <a class="navbar-brand js-scroll-trigger" href="#page-top"><img height="60" src="assets\img\CSGSG_ASCII_CROPPED.png"/></a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        Menu
        <i class="fas fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav text-uppercase ml-auto">
        
        
          <li class="nav-item"><a class="nav-link js-scroll-trigger" href="/">Home</a></li>
        
          <li class="nav-item"><a class="nav-link js-scroll-trigger" href="/about">About</a></li>
        
          <li class="nav-item"><a class="nav-link js-scroll-trigger" href="/events">Events</a></li>
        
          <li class="nav-item"><a class="nav-link js-scroll-trigger" href="/resources">Resources</a></li>
        
          <li class="nav-item"><a class="nav-link js-scroll-trigger" href="/#contact">Contact</a></li>
        
        
        </ul>
      </div>
    </div>
  </nav>
  <!-- End Navigation -->
  
  <!-- Header -->
  
  <header class="masthead">
    <div class="container">
      <div class="intro-text"></div>
    </div>
  </header>
  
  <!-- End Header -->
<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Evo Calendar with Google Calendar Events</title>
      <!-- Add the evo-calendar.css for styling -->
      <link href="https://cdn.jsdelivr.net/npm/evo-calendar@1.1.3/evo-calendar/css/evo-calendar.min.css" rel="stylesheet">
      <link href="https://cdn.jsdelivr.net/npm/evo-calendar@1.1.3/evo-calendar/css/evo-calendar.midnight-blue.css" rel="stylesheet">
      <link href="https://cdn.jsdelivr.net/npm/evo-calendar@1.1.3/evo-calendar/css/evo-calendar.royal-navy.css" rel="stylesheet">
      <link href="https://cdn.jsdelivr.net/npm/evo-calendar@1.1.3/evo-calendar/css/evo-calendar.orange-coral.css" rel="stylesheet">
  </head>



  <body>

    <div id="evoCalendar"></div>

    <!-- Include jQuery first -->
    <script src=" https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js "></script>

    <!-- Then include Evo Calendar JS -->
    <script src=" https://cdn.jsdelivr.net/npm/evo-calendar@1.1.3/evo-calendar/js/evo-calendar.min.js "></script>

    <!-- GCAL API -->
    <script src="https://apis.google.com/js/api.js"></script>


    <script>
      $.noConflict();
      jQuery(document).ready(function($) {
        console.log("INITALIZE SCRIPT")
        //$('#evoCalendar').evoCalendar({
        //      theme: 'Royal Navy', // Set theme
        //      calendarEvents: []// Initially empty, we'll add events here
        //});

      
        // Function to add events to Evo Calendar
        //function addEventsToEvoCalendar(events) {
        //  $('#evoCalendar').evoCalendar('addCalendarEvent', events);
        //}
        const today = new Date();
        today.setHours(0, 0, 0, 0); 
        console.log(today)
        // Fetch events from Google Calendar and add to Evo Calendar
        
        const calendarId = 'virginia.edu_4oqmn9qd28qk2beslk1u9jros4@group.calendar.google.com'; // Replace with your Calendar ID
        const apiKey = 'AIzaSyDL8Rpzq58NR9GdhJAi2WdlsIQH4c05IBE'; // Replace with your API key
        const url = `https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(calendarId)}/events?key=${apiKey}`;
        
        let globalEvents = [];

        $.get(url, function(data) {
          const events = data.items
            .filter(item => {
              // Get the event start date, considering both dateTime and date properties
              try{
                //console.log(item.start.dateTime)
                const eventStartDate = item.start.dateTime ? new Date(item.start.dateTime) : new Date(item.start.date);
                return eventStartDate >= today; // Filter events happening today or in the future
              }catch(error){
                //console.error(error)
              }
            })
            .map(item => ({
                 id: item.id,
                 name: item.summary,
                 description: item.description || '',
                 date: item.start.dateTime || item.start.date, // Use start.dateTime for specific times, or start.date for all-day events
                 type: "CSGSG Social Event"
            }));
            console.log("EVENTS", events);//$('#evoCalendar').evoCalendar('addCalendarEvent', events);
            $('#evoCalendar').evoCalendar({
              theme: 'Orange Coral',
              calendarEvents: events// Initially empty, we'll add events here
            });

            
        });
      

      });
    </script>


  </body>
</html>







	  <!-- Footer -->
<footer class="footer" id="footer" style="background-color: white">
  <div class="container">
    
    <div class="row align-items-center">
      <div class="col-md-4">
        <span class="copyright"
          >Copyright &copy; CSGSG 2024</span
        >
      </div>
      <!-- Social Media -->
      <div class="col-md-4">
        <ul class="list-inline social-buttons">
          
          <li class="list-inline-item">
            
            <a href="mailto:csgsg@virginia.edu">
              <i class="fas fa-envelope"></i>
            </a>
            
          </li>
          
          <li class="list-inline-item">
            
            <a href="https://discord.gg/tF3uG8T2">
              <i class="fab fa-discord"></i>
            </a>
            
          </li>
          
        </ul>
      </div>
      <!-- Legal -->
      <div class="col-md-4">
        <ul class="list-inline quicklinks">
          <li class="list-inline-item">
            <a href="legal"
              >Privacy Policy</a
            >
          </li>
        </ul>
      </div>
    </div>
    
  </div>
</footer>

<!-- End Footer -->


	  <!-- Bootstrap core JavaScript -->
	  <script src="assets/js/jquery.min.js"></script>
	  <script src="assets/js/bootstrap.bundle.min.js"></script>

	  <!-- Plugin JavaScript -->
	  <script src="assets/js/jquery.easing.min.js"></script>

	  <!-- Contact form JavaScript -->
	  <script src="assets/js/jqBootstrapValidation.js"></script>
	  <script src="assets/js/contact_me.js"></script>

	  <!-- Custom scripts for this template -->
	  <script src="assets/js/agency.min.js"></script>

  </body>
</html>